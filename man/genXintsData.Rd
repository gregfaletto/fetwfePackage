% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/did_funcs.R
\name{genXintsData}
\alias{genXintsData}
\title{Generate Full Design Matrix with Interactions (\code{X_ints})}
\usage{
genXintsData(
  cohort_fe,
  time_fe,
  X_long,
  treat_mat_long,
  N,
  R,
  T,
  d,
  N_UNTREATED,
  p
)
}
\arguments{
\item{cohort_fe}{Matrix of cohort dummy variables (N*T rows, R columns).}

\item{time_fe}{Matrix of time dummy variables (N*T rows, T-1 columns).}

\item{X_long}{Matrix of time-invariant covariates (N*T rows, \code{d} columns).}

\item{treat_mat_long}{Matrix of treatment-period dummy variables (N*T rows,
\code{num_treats} columns).}

\item{N}{Integer; total number of unique units.}

\item{R}{Integer; total number of treated cohorts.}

\item{T}{Integer; total number of time periods.}

\item{d}{Integer; total number of covariates.}

\item{N_UNTREATED}{Integer; number of never-treated units.}

\item{p}{Integer; the expected total number of columns in the final \code{X_ints} matrix.}
}
\value{
The complete design matrix \code{X_ints} (\code{N*T} rows, \code{p} columns).
}
\description{
Constructs the complete design matrix \code{X_ints} used in the ETWFE model.
This matrix includes cohort fixed effects, time fixed effects, covariates,
treatment-period dummies, and all their relevant two-way interactions
(cohort-covariate, time-covariate, treatment-covariate).
}
\details{
The matrix \code{X_ints} is constructed by column-binding the following blocks in order:
\enumerate{
\item \code{cohort_fe} (\code{R} columns)
\item \code{time_fe} (\code{T-1} columns, or 0 if \code{T=1})
\item \code{X_long} (\code{d} columns, or 0 if \code{d=0})
\item Cohort-covariate interactions from \code{generateFEInts} (\code{R*d} columns)
\item Time-covariate interactions from \code{generateFEInts} (\code{(T-1)*d} columns)
\item \code{treat_mat_long} (\code{num_treats} columns)
\item Treatment-covariate interactions from \code{genTreatInts} (\code{d*num_treats} columns)
}
The function checks if the number of columns in the resulting matrix matches \code{p}.
}
\keyword{internal}
