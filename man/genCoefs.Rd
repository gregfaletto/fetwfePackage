% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetwfe.R
\name{genCoefs}
\alias{genCoefs}
\title{Generate Coefficient Vector for Data Generation}
\usage{
genCoefs(R, T, d, density, eff_size)
}
\arguments{
\item{R}{Integer. The number of treated cohorts (treatment is assumed to start in periods 2 to \code{R + 1}).}

\item{T}{Integer. The total number of time periods.}

\item{d}{Integer. The number of time-invariant covariates. If \code{d > 0}, additional terms corresponding
to covariate main effects and interactions are included in \code{beta}.}

\item{density}{Numeric in (0,1). The probability that any given entry in the initial sparse coefficient
vector \code{theta} is nonzero.}

\item{eff_size}{Numeric. The magnitude used to scale nonzero entries in \code{theta}. Each nonzero entry is
set to \code{eff_size} or \code{-eff_size} (with a 60 percent chance for a positive value).}
}
\value{
A list with two elements:
\describe{
\item{\code{beta}}{A numeric vector representing the full coefficient vector after the inverse fusion transform.}
\item{\code{theta}}{A numeric vector that is sparse, from which \code{beta} is derived.}
}
}
\description{
This function generates a coefficient vector \code{beta} along with a sparse auxiliary vector
\code{theta} for simulation studies of the fused extended two-way fixed effects estimator. The
returned \code{beta} is formatted to align with the design matrix created by \code{genRandomData()},
and is a valid input for the \code{beta} argument of that function. The vector \code{theta} is sparse,
with nonzero entries occurring with probability \code{density} and scaled by \code{eff_size}.
}
\details{
The length of \code{beta} is given by
\deqn{p = R + (T - 1) + d + dR + d(T - 1) + \mathit{num\_treats} + (\mathit{num\_treats} \times d)}{p = R + (T - 1) + d + dR + d(T - 1) + num_treats + (num_treats * d)},
where the number of treatment parameters is defined as
\deqn{\mathit{num\_treats} = T \times R - \frac{R(R+1)}{2}}{num_treats = T * R - R(R+1)/2}.

The function operates in two steps:
\enumerate{
\item It first creates a sparse vector \code{theta} of length \eqn{p}, with nonzero entries occurring
with probability \code{density}. Nonzero entries are set to \code{eff_size} or \code{-eff_size} (with a 60\\%
chance for a positive value).
\item The full coefficient vector \code{beta} is then computed by applying an inverse fusion transform to \code{theta}
using internal routines (e.g., \code{genBackwardsInvFusionTransformMat()} and \code{genInvTwoWayFusionTransformMat()}).
}
}
\examples{
\dontrun{
  # Generate coefficients for a panel with 5 treated cohorts, 30 time periods,
  # a density of 0.1 for nonzero coefficients, effect size 2, and 12 covariates.
  coefs <- genCoefs(R = 5, T = 30, density = 0.1, eff_size = 2, d = 12)

  # Use the generated beta vector in a simulation study:
  simData <- genRandomData(
    N = 120, T = 30, R = 5, d = 12,
    sig_eps_sq = 5, sig_eps_c_sq = 5,
    beta = coefs$beta,
    seed = 123
  )
}

}
