% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetwfe.R
\name{genCoefs}
\alias{genCoefs}
\title{Generate Coefficient Vector for Data Generation}
\usage{
genCoefs(R, T, d, density, eff_size)
}
\arguments{
\item{R}{Integer. The number of treated cohorts (treatment is assumed to start in periods 2 to T).}

\item{T}{Integer. The total number of time periods.}

\item{d}{Integer. The number of time-invariant covariates. If \code{d > 0}, additional terms
corresponding to covariate main effects and interactions are included in \code{beta}.}

\item{density}{Numeric in \eqn{(0,1)}. The probability that any given entry in the initial
sparse coefficient vector \code{theta} is nonzero.}

\item{eff_size}{Numeric. The magnitude used to scale nonzero entries in \code{theta}. Each
nonzero is set to \code{eff_size} or \code{-eff_size} (with a 60\\% chance of being positive).}
}
\value{
A list with two elements:
\describe{
\item{\code{beta}}{A numeric vector of length \eqn{R + (T-1) + d + dR + d(T-1) + \text{num_treats} + (\text{num_treats} \times d)},
which is a valid input for the \code{beta} argument of \code{genRandomData()}.}
\item{\code{theta}}{A numeric vector of the same length as \code{beta} that is sparse (with nonzero
entries determined by \code{density} and scaled by \code{eff_size}). This vector is transformed
to obtain \code{beta}.}
}
}
\description{
This function generates a coefficient vector \code{beta} along with a sparse auxiliary vector
\code{theta} for simulation studies of the fused extended two-way fixed effects estimator. The
returned \code{beta} is constructed via an inverse fusion transform from a sparse vector
\code{theta} (with approximately \code{density} proportion of nonzero entries scaled by
\code{eff_size}) and is a valid input for the \code{beta} argument of \code{genRandomData()}.
}
\details{
The total length of \code{beta} is given by:
\deqn{
p = R + (T - 1) + d + dR + d(T - 1) + \text{num_treats} + (\text{num_treats} \times d),
}
where
\deqn{
\text{num\_treats} = T \times R - \frac{R(R+1)}{2}.
}

The function works as follows:
\enumerate{
\item It first creates a vector \code{theta} of length \eqn{p} (as computed above) where each
entry is independently set to a nonzero value with probability \code{density}. For nonzero entries,
the value is \code{eff_size} or \code{-eff_size} (with a 60\\% probability for a positive sign).
\item It then computes \code{beta} by applying an inverse fusion transform (using internal routines
such as \code{genBackwardsInvFusionTransformMat()} and \code{genInvTwoWayFusionTransformMat()})
to \code{theta}. This step converts the sparse parameter vector \code{theta} into a full coefficient
vector \code{beta} that is compatible with the design matrix used in \code{genRandomData()}.
}
}
\examples{
\dontrun{
  # Generate coefficients for a panel with 5 treated cohorts, 30 time periods,
  # density 0.1 for nonzero coefficients, effect size 2, and 12 covariates.
  coefs <- genCoefs(R = 5, T = 30, density = 0.1, eff_size = 2, d = 12)
  
  # Use the generated beta vector in a simulation study:
  simData <- genRandomData(
    N = 120, T = 30, R = 5, d = 12,
    sig_eps_sq = 5, sig_eps_c_sq = 5,
    beta = coefs$beta,
    seed = 123
  )
}

}
