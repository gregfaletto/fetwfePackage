% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/did_funcs.R
\name{processCovs}
\alias{processCovs}
\title{Process Covariates for FETWFE}
\usage{
processCovs(
  df,
  units,
  unit_var,
  times,
  time_var,
  covs,
  resp_var,
  T,
  verbose = FALSE
)
}
\arguments{
\item{df}{A \code{data.frame} containing the panel data. It should have been
partially processed by \code{idCohorts} (e.g., first-period treated units removed).}

\item{units}{A character vector of unique unit identifiers to process.}

\item{unit_var}{Character string; name of the unit identifier column in \code{df}.}

\item{times}{A numeric or integer vector of unique, sorted time periods.}

\item{time_var}{Character string; name of the time variable column in \code{df}.}

\item{covs}{A character vector of covariate names to process.}

\item{resp_var}{Character string; name of the response variable column in \code{df}.}

\item{T}{Integer; the total number of unique time periods.}

\item{verbose}{Logical. If \code{TRUE}, prints messages about covariate processing.}
}
\value{
A list containing:
\item{df}{The processed \code{data.frame} with covariates made time-invariant
and problematic ones removed. Rows are sorted by unit and time.}
\item{covs}{The updated character vector of valid covariate names remaining
after processing.}
}
\description{
This function processes covariates for use in the FETWFE model. It ensures
covariates are time-invariant by using their first-period values. It also
handles missing covariate values and removes covariates that are constant
across all units.
}
\details{
The function performs the following steps:
\enumerate{
\item If no covariates are provided (\code{length(covs) == 0}), it returns the
dataframe ordered by unit and time, containing only response, time, and
unit variables.
\item For each unit, it checks for missing covariate values in the first
time period (\code{times[1]}). Covariates with any \code{NA} in the first period
for any unit are removed from the \code{covs} list, and a warning is issued.
\item Covariates that have the same value across all unit-time observations
are removed, and a warning is issued.
\item The dataframe \code{df} is subsetted to keep only the response, time, unit,
and valid covariate columns.
\item For any remaining time-varying covariates, their values for all time
periods of a unit are replaced by that unit's value from the first time
period (\code{times[1]}).
\item Finally, \code{df} is sorted by unit and then by time.
}
}
\keyword{internal}
