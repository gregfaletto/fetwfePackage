% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/did_funcs.R
\name{idCohorts}
\alias{idCohorts}
\title{Identify Cohorts and Basic Panel Structure}
\usage{
idCohorts(df, time_var, unit_var, treat_var, covs)
}
\arguments{
\item{df}{A \code{data.frame} object representing the panel data. Contains columns for response, time
period variable (a single categorical or numeric/integer variable indicating the time period
for each observation), unit variable (a single categorical variable
indicating which unit each observation is), treatment (a binary variable;
1 if unit is treated at that time and 0 if not; treatment must be an
absorbing state in this model); covariates (which are fixed over time)}

\item{time_var}{Character string; name of the time variable column.}

\item{unit_var}{Character string; name of the unit identifier column.}

\item{treat_var}{Character string; name of the treatment indicator column.}

\item{covs}{Character vector; names of covariate columns (used for subsetting \code{df}).}
}
\value{
A list containing:
\item{df}{The processed \code{data.frame} with first-period-treated units removed
and the \code{treat_var} column dropped. Contains only \code{time_var}, \code{unit_var},
\code{response} (implicitly, as it's not dropped), and \code{covs}.}
\item{cohorts}{A list where each element is a character vector of unit IDs
belonging to a specific treatment cohort. The names of the list elements
are the times of treatment adoption. The first cohort (earliest adoption
time after the first period) is listed first.}
\item{units}{A character vector of unique unit identifiers remaining after
processing.}
\item{times}{A numeric or integer vector of unique, sorted time periods
present in the original data.}
}
\description{
This function processes the input panel data to identify treatment cohorts,
unique units, and time periods. It also removes units that were treated in the
very first time period, as these units cannot be used for identifying
pre-treatment trends for themselves. The treatment variable is removed after
cohorts are identified.
}
\details{
The function iterates through each unit to determine its cohort assignment based
on the first period it is observed as treated. It assumes treatment is an
absorbing state.
Units treated in the first time period (\code{times[1]}) are removed from the dataset
and a warning is issued.
Cohorts are stored in a list, where names are the treatment adoption times and
values are character vectors of unit identifiers belonging to that cohort.
The list of cohorts is ordered by adoption time, and the first time period is
ensured to have an empty cohort (representing never-treated or baseline).
}
\keyword{internal}
