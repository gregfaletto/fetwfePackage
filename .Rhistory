treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35, add_ridge=TRUE,
verbose = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
devtools::build()
devtools::test()
library(did)
?did
devtools::build()
devtools::test()
devtools::test()
devtools::test()
devtools::test()
devtools::buil()
devtools::build()
devtools::test()
?expect_error
devtools::test()
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
?etwfe
coefs <- genCoefs()
?genCoefs
coefs <- genCoefs(R=2, T=5, d=0, density=0.5, eff_size=1)
?simulateData
sim_data <- simulateData(coefs, N=50, sig_eps_sq=1, sig_eps_c_sq=1)
sim_data
devtools::build()
remove.packages("fetwfe")
devtools::install()
coefs <- genCoefs(R=2, T=5, d=0, density=0.5, eff_size=1)
library(fetwfe)
coefs <- genCoefs(R=2, T=5, d=0, density=0.5, eff_size=1)
sim_data <- simulateData(coefs, N=50, sig_eps_sq=1, sig_eps_c_sq=1)
etwfeWithSimulatedData(sim_data)
?etwfeWithSimulatedData
devtools::document()
etwfeWithSimulatedData(simulated_data)
etwfeWithSimulatedData(sim_data)
res <- etwfeWithSimulatedData(sim_data)
res$att_hat
getTes(coefs)
res$catt_df
sim_data <- simulateData(coefs, N=500, sig_eps_sq=1, sig_eps_c_sq=1)
res <- etwfeWithSimulatedData(sim_data)
res$att_hat
res$catt_df
sim_data <- simulateData(coefs, N=2000, sig_eps_sq=1, sig_eps_c_sq=1)
res <- etwfeWithSimulatedData(sim_data)
res$att_hat
res$catt_df
coefs <- genCoefs(R=2,T=3,d=0,density=0.95,eff_size=1)
sim_data <- simulateData(coefs, N=2000, sig_eps_sq=1, sig_eps_c_sq=1)
res <- etwfeWithSimulatedData(sim_data)
getTes(coefs)
res$att_hat
res$catt_df
devtools::build()
devtools::test()
devtools::test()
install.packages("etwfe")
remove.packages("fetwfe")
devtools::install()
library(did)
data("mpdta")
str(mpdta)
mpdta_fetwfe <- attgtToFetwfeDf(data=mpdta, yname="lemp", tname="year", idname = "countyreal", gname = "first.treat", covars = c("lpop"))
library(fetwfe)
library(did)
data("mpdta")
mpdta_fetwfe <- attgtToFetwfeDf(data=mpdta, yname="lemp", tname="year", idname = "countyreal", gname = "first.treat", covars = c("lpop"))
res <- fetwfe(
pdata      = tidy_df,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res <- fetwfe(
pdata      = mpdta_fetwfe,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res1 <- etwfe(
pdata      = mpdta_fetwfe,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res1$att_hat
res1$catt_df
res1$beta_hat[res1$treat_inds]
devtools::build()
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
library(did)  # provides the mpdta example dataframe
data(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
res <- fetwfe(
pdata      = tidy_df,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
library(did)  # provides the mpdta example dataframe
data(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
res1 <- etwfe(
pdata      = tidy_df,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res1$beta_hat[res1$treat_inds]
devtools::build()
remove.packages("fetwfe")
devtools::install_package()
devtools::install()
library(fetwfe)
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
library(fetwfe)
res <- etwfe(
pdata      = tidy_df,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res$beta_hat[res$treat_inds]
devtools::build()
uninstall.packages("fetwfe")
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
library(fetwfe)
res <- etwfe(
pdata      = tidy_df,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res$beta_hat[res$treat_inds]
res$catt_df
coefs <- genCoefs(R=2, T=4, d=1, density=0.9, eff_size=1)
res <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1) |> etwfeWithSimulatedData()
coefs <- genCoefs(R=2, T=4, d=0, density=0.9, eff_size=1)
res <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1) |> etwfeWithSimulatedData()
coefs |> getTes(
)
res$catt_df
res <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1) |> etwfeWithSimulatedData()
res$catt_df
res <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1) |> etwfeWithSimulatedData()
res$catt_df
res <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1) |> etwfeWithSimulatedData()
res$catt_df
res <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1) |> etwfeWithSimulatedData()
res$catt_df
library(did)  # provides the mpdta example dataframe
data(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
library(fetwfe)
res <- fetwfe(
pdata      = tidy_df,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res$att_hat
res$catt_df
?fetwfe
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- fetwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
library(did)  # provides the mpdta example dataframe
data(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
library(fetwfe)
res <- fetwfe(
pdata      = tidy_df,
time_var   = "time",
unit_var   = "unit",
treatment  = "treatment",
response   = "y",
covs       = c("lpop"))
res$catt_df
res$att_hat
res <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1) |> etwfeWithSimulatedData()
sim_data <- coefs |> simulateData(N=3000,sig_eps_sq=1,sig_eps_c_sq = 1)
sim_data |> etwfeWithSimulatedData()$att_hat
sim_data |> etwfeWithSimulatedData()
res_etwfe <- sim_data |> etwfeWithSimulatedData()
res_etwfe$att_hat
res_etwfe$catt_f
res_etwfe$catt_df
res_fetwfe <- sim_data |> fetwfeWithSimulatedData()
res_fetwfe$att_hat
res_etwfe$catt_df
res_fetwfe$catt_df
coefs <- genCoefs(R=2,T=4,d=2,density=0.1, eff_size=1)
sim_data <- coefs |> simulateData(N=3000,sig_eps_sq = 1,sig_eps_c_sq = 1)
res_etwfe <- sim_data |> etwfeWithSimulatedData()
res_fetwfe <- sim_data |> fetwfeWithSimulatedData()
res_etwfe$att_hat
res_fetwfe$att_hat
getTes(coefs)
res_fetwfe$catt_df
res_etwfe$catt_df
genCoefs(R=2,T=4,d=1,density=0.1, eff_size=1)
genCoefs(R=2,T=4,d=1,density=0.1, eff_size=1)
coefs <- genCoefs(R=2, T=4, d=1, density=0.9, eff_size=1)
devtools::build()
remove.packages("fetwfe")
devtools::install()
devtools::test()
devtools::document()
devtools::build()
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
?etwfeToFetwfeDf()
devtools::document()
?etwfeToFetwfeDf()
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yvar = "lemp",
tvar = "year",
idvar = "countyreal",
gvar = "first.treat",
covars = c("lpop"))
devtools::document()
?etwfeToFetwfeDf()
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- etwfeToFetwfeDf(
data  = mpdta,
yvar = "lemp",
tvar = "year",
idvar = "countyreal",
gvar = "first.treat",
covars = c("lpop"))
head(tidy_df)
library(fetwfe)
res <- fetwfe(
pdata      = tidy_df,
time_var   = "time_var",
unit_var   = "unit_var",
treatment  = "treatment",
response   = "response",
covs       = c("lpop"))
devtools::build()
remove.packages("fetwfe")
devtools::document()
devtools::install()
library(fetwfe)
?etwfeToFetwfeDf
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- etwfeToFetwfeDf(
data  = mpdta,
yvar = "lemp",
tvar = "year",
idvar = "countyreal",
gvar = "first.treat",
covars = c("lpop"))
head(tidy_df)
## Now you can call fetwfe()  ------------------------------------------------
library(fetwfe)
res <- fetwfe(
pdata      = tidy_df,
time_var   = "time_var",
unit_var   = "unit_var",
treatment  = "treatment",
response   = "response",
covs       = c("lpop"))
?attgtToFetwfeDf
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
head(tidy_df)
## Now you can call fetwfe()  ------------------------------------------------
# library(fetwfe)
res <- fetwfe(
pdata      = tidy_df,
time_var   = "time_var",
unit_var   = "unit_var",
treatment  = "treatment",
response   = "response",
covs       = c("lpop"))
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
head(tidy_df)
## Now you can call fetwfe()  ------------------------------------------------
# library(fetwfe)
res_fetwfe <- fetwfe(
pdata      = tidy_df,
time_var   = "time_var",
unit_var   = "unit_var",
treatment  = "treatment",
response   = "response",
covs       = c("lpop"))
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
head(tidy_df)
## Now you can call fetwfe()  ------------------------------------------------
# library(fetwfe)
res_etwfe <- etwfe(
pdata      = tidy_df,
time_var   = "time_var",
unit_var   = "unit_var",
treatment  = "treatment",
response   = "response",
covs       = c("lpop"))
res_fetwfe$att_hat
res_etwfe$att_hat
res_fetwfe$catt_df
res_etwfe$catt_df
devtools::document()
devtools::document()
coefs <- genCoefs()
coefs <- genCoefs(R=2.T=4,d=1,density=0.1, eff_size=1)
coefs <- genCoefs(R=2, T=4,d=1,density=0.1, eff_size=1)
sim_data <- coefs |> simulateData(N=3000,sig_eps_c_sq = 1, sig_eps_sq = 1)
devtools::build()
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
coefs <- genCoefs(R=2,T=4,d=1,density=0.1,eff_size=1)
sim_data <- coefs |> simulateData(N=3000, sig_eps_c_sq = 1, sig_eps_sq = 1)
devtools::build()
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
coefs <- genCoefs(R=2,T=4,d=1,density=0.1,eff_size=1)
sim_data <- coefs |> simulateData(N=3000,sig_eps_sq = 1, sig_eps_c_sq = 1)
devtools::build()
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
coefs <- genCoefs(R=2,T=4,d=1,density=0.1,eff_size=1)
sim_data <- coefs |> simulateData(N=3000,sig_eps_sq = 1, sig_eps_c_sq = 1)
res_etwfe <- sim_data |> etwfeWithSimulatedData()
res_fetwfe <- sim_data |> fetwfeWithSimulatedData()
coefs |> getTes()
res_etwfe$att_hat
res_etwfe$catt_df
res_fetwfe$att_hat
res_fetwfe$catt_df
?fetwfe
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- fetwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
?did
library(did)
?att_gt
# Example data
data(mpdta)
out1 <- att_gt(yname="lemp",
tname="year",
idname="countyreal",
gname="first.treat",
xformla=NULL,
data=mpdta)
summary(out1)
citation("etwfe")
devtools::document()
devtools::build()
devtools::test()
devtools::test()
devtools::test()
devtools::build()
devtools::test()
devtools::test()
devtools::document()
devtools::check()
?att_gt()
devtools::build()
devtools::test()
devtools::check()
devtools::document()
devtools::spell_check()
devtools::build()
devtools::build_vignettes()
devtools::test()
devtools::document()
devtools::check()
devtools::release()
devtools::check_rhub()
devtools::release()
