# are provided to speed up the computation of the example
res <- betwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- betwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
remove.packages("fetwfe")
devtools::install()
library(fetwfe)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- betwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
remove.packages("fetwfe")
devtools::buld()
devtools::build()
devtools::install()
library(fetwfe)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- betwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- betwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- betwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
# Cohort average treatment effects and confidence intervals (in percentage
# point units)
catt_df_pct <- res$catt_df
catt_df_pct[["Estimated TE"]] <- 100 * catt_df_pct[["Estimated TE"]]
catt_df_pct[["SE"]] <- 100 * catt_df_pct[["SE"]]
catt_df_pct[["ConfIntLow"]] <- 100 * catt_df_pct[["ConfIntLow"]]
catt_df_pct[["ConfIntHigh"]] <- 100 * catt_df_pct[["ConfIntHigh"]]
catt_df_pct
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- fetwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
# Cohort average treatment effects and confidence intervals (in percentage
# point units)
catt_df_pct <- res$catt_df
catt_df_pct[["Estimated TE"]] <- 100 * catt_df_pct[["Estimated TE"]]
catt_df_pct[["SE"]] <- 100 * catt_df_pct[["SE"]]
catt_df_pct[["ConfIntLow"]] <- 100 * catt_df_pct[["ConfIntLow"]]
catt_df_pct[["ConfIntHigh"]] <- 100 * catt_df_pct[["ConfIntHigh"]]
catt_df_pct
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- etwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- etwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE, add_ridge = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
# Cohort average treatment effects and confidence intervals (in percentage
# point units)
catt_df_pct <- res$catt_df
catt_df_pct[["Estimated TE"]] <- 100 * catt_df_pct[["Estimated TE"]]
catt_df_pct[["SE"]] <- 100 * catt_df_pct[["SE"]]
catt_df_pct[["ConfIntLow"]] <- 100 * catt_df_pct[["ConfIntLow"]]
catt_df_pct[["ConfIntHigh"]] <- 100 * catt_df_pct[["ConfIntHigh"]]
catt_df_pct
devtools::test()
devtools::test()
devtools::check()
devtools::document()
remove.packages("fetwfe")
devtools::build()
devtools::document()
devtools::install()
devtools::test()
?betwfeWithSimulatedData
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5, seed = 123)
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- betwfeWithSimulatedData(sim_data)
coefs |> getTes()
remove.packages("fetwfe")
devtools::build()
devtools::document()
devtools::install()
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- betwfeWithSimulatedData(sim_data)
coefs |> getTes()
devtools::check()
devtools::check_rhub()
library(fetwfe)
coef_obj <- genCoefs(R=2, T=4, d=1, density=0.9, eff_size=1)
sim_data <- simulateData(coef_obj, N=3000, sig_eps_sq=1, sig_eps_c_sq = 1)
sim_data |> fetwfeWithSimulatedData()
fetwfe_results <- sim_data |> fetwfeWithSimulatedData()
fetwfe_results
fetwfe_results$att_hat
fetwfe_results$catt_df
coefs_obj |> getTes()
coef_obj |> getTes()
etwfe_results <- sim_data |> etwfeWithSimulatedData()
etwfe_results$att_hat
etwfe_results$catt_df
betwfe_results <- sim_data |> betwfeWithSimulatedData()
betwfe_results$att_hat
betwfe_results$catt_df
fetwfe_results$catt_df
fetwfe_results$att_hat
sparse_coefs <- genCoefs(R=2, T=4, d=1, density=0.1, eff_size=1)
sparse_sim_data <- simulateData(sparse_coefs, N=3000, sig_eps_sq=1, sig_eps_c_sq=1)
fetwfe_results <- sim_data |> fetwfeWithSimulatedData()
betwfe_results <- sim_data |> betwfeWithSimulatedData()
etwfe_results <- sim_data |> etwfeWithSimulatedData()
getTes(sparse_coefs)
fetwfe_results$att_hat
fetwfe_results$catt_df
etwfe_results$att_hat
fetwfe_results <- sparse_sim_data |> fetwfeWithSimulatedData()
betwfe_results <- sparse_sim_data |> betwfeWithSimulatedData()
etwfe_results <- sparse_sim_data |> etwfeWithSimulatedData()
fetwfe_results$att_hat
fetwfe_results$catt_df
betwfe_results$att_hat
betwfe_results$catt_df
etwfe_results$att_hat
etwfe_results$catt_df
remove.packages("fetwfe")
devtools::build()
devtools::document()
devtools::install()
library(fetwfe)
?twfeCovs
?attgtToFetwfeDf
library(did)  # provides the mpdta example dataframe
data(mpdta)
head(mpdta)
tidy_df <- attgtToFetwfeDf(
data  = mpdta,
yname = "lemp",
tname = "year",
idname = "countyreal",
gname = "first.treat",
covars = c("lpop"))
head(tidy_df)
res <- twfeCovs(pdata=tidy_df, time_var='time_var', unit_var="unit_var", treatment="treatment", response="response", covs=c("lpop"))
res <- etwfe(pdata=tidy_df, time_var='time_var', unit_var="unit_var", treatment="treatment", response="response", covs=c("lpop"))
remove.packages("fetwfe")
devtools::build()
devtools::install()
remove.packages("fetwfe")
devtools::build()
devtools::document()
library(fetwfe)
sim_data <- genCoefs(R=2, T=4, d=1, density=0.9, eff_size=1) |> simulateData(N=3000, sig_eps_sq=1, sig_eps_c_sq = 1)
remove.packages("fetwfe")
remove.packages(fetwfe)
remove.packages("fetwfe")
library(fetwfe)
remove.packages("fetwfe")
?fetwfe
library(fetwfe)
devtools::build()
devtools::install()
devtools::document()
library(fetwfe)
?twfeCovsWithSimuatedData
?twfeCovsWithSimulatedData
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- etwfeWithSimulatedData(sim_data)
remove.packages("fetwfe")
devtools::build()
devtools::document()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
result$att_hat
result$catt_df
coefs |> getTes()
remove.packages("fetwfe")
devtools::build()
devtools::install()
library(fetwfe)
# Generate coefficients
coefs <- genCoefs(R = 5, T = 30, d = 12, density = 0.1, eff_size = 2, seed = 123)
# Simulate data using the coefficients
sim_data <- simulateData(coefs, N = 120, sig_eps_sq = 5, sig_eps_c_sq = 5)
result <- twfeCovsWithSimulatedData(sim_data)
result_ridge <- twfeCovsWithSimulatedData(sim_data, add_ridge=TRUE)
result$att_hat
result_ridge$att_hat
result$catt_df
result_ridge$catt_df
setwd("/Users/gregfaletto/Documents/GitHub/did")
source("did_test.R")
source("did_test.R")
source("did_test.R")
?att_gt
?aggte
?att_gt
source("did_test.R")
source("did_test.R")
?aggte
?build_sim_dataset
agg
str(agg)
agg$overall.att + agg$overall.se * 1.96
agg$overall.att - agg$overall.se * 1.96
remove.package("fetwfe")
remove.packages("fetwfe")
devtools::build()
devtools::build()
remove.packages("fetwfe")
devtools::build()
devtools::document()
devtools::test()
devtools::check()
devtools::install()
devtools::check_rhub()
library(fetwfe)
?fetwfe
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- fetwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- etwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- etwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE, add_ridge=TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
set.seed(23451)
library(bacondecomp)
data(divorce)
# sig_eps_sq and sig_eps_c_sq, calculated in a separate run of `fetwfe(),
# are provided to speed up the computation of the example
res <- fetwfe(
pdata = divorce[divorce$sex == 2, ],
time_var = "year",
unit_var = "st",
treatment = "changed",
covs = c("murderrate", "lnpersinc", "afdcrolls"),
response = "suiciderate_elast_jag",
sig_eps_sq = 0.1025361,
sig_eps_c_sq = 4.227651e-35,
verbose = TRUE)
# Average treatment effect on the treated units (in percentage point
# units)
100 * res$att_hat
# Conservative 95% confidence interval for ATT (in percentage point units)
low_att <- 100 * (res$att_hat - qnorm(1 - 0.05 / 2) * res$att_se)
high_att <- 100 * (res$att_hat + qnorm(1 - 0.05 / 2) * res$att_se)
c(low_att, high_att)
res$catt_df
devtools::build_vignettes()
coefs <- genCoefs(R=3,T=5,d=2,density=0.1,eff_size=1)
getTes(coefs)
res_fetwfe <- coefs |> simulateData(N=500, sig_eps_sq=1, sig_eps_c_sq=1) |> fetwfeWithSimulatedData()
res_fetwfe$att_hat
res_fetwfe$catt_df
res_etwfe <- coefs |> simulateData(N=500, sig_eps_sq=1, sig_eps_c_sq=1) |> etwfeWithSimulatedData()
res_etwfe$att_hat
res_etwfe$catt_df
